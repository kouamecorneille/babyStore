<app-breadcrumb [firstTitle]="'Accueil'" [secondTitle]="'Produits'"  [firdTitle]="'Detals du produit'"></app-breadcrumb>
<!-- [firdTitle]="product.name ? product.name : ''" -->
<div class="container mb-30" restoreScrollPosition>
    <div class="row">
        <div class="col-xl-11 col-lg-12 m-auto">
            <div class="row">
                @if(productDetails()){
                  <div>
                    <div class="product-detail accordion-detail">
                        <div class="row mb-50 mt-30">
                            <div class="col-md-6 col-sm-12 col-xs-12 mb-md-0 mb-sm-5">
                              <div class="detail-gallery">
                                <span class="zoom-icon"><i class="fi-rs-search"></i></span>
                                <!-- MAIN SLIDES -->
                                <div class="product-image-slider">
                                  <ngx-slick-carousel
                                      #slickModal="slick-carousel"
                                        [config]="slideConfig"
                                        (init)="slickInit($event)"
                                        (breakpoint)="breakpoint($event)"
                                        (afterChange)="afterChange($event)"
                                        (beforeChange)="beforeChange($event)">
                                        <div ngxSlickItem *ngFor="let slide of bannersConfigs">
                                          <figure class="border-radius-10">
                                            <img [src]="slide.img" alt="product image">
                                           </figure>
                                        </div>
                                      </ngx-slick-carousel>
                                </div>
                                <!-- THUMBNAILS -->
                                <div class="slider-nav-thumbnails">
                                    <ngx-slick-carousel
                                        #slickModal="slick-carousel"
                                          [config]="slidethumbnailsConfig"
                                          (init)="slickInit($event)"
                                          (breakpoint)="breakpoint($event)"
                                          (afterChange)="afterChange($event)"
                                          (beforeChange)="beforeChange($event)">
                                          <div ngxSlickItem *ngFor="let slide of bannersConfigs">
                                           @if(slide.img){
                                            <div role="button">
                                              <img [src]="slide.img" alt="product image">
                                            </div>
                                           }
                                          </div>
                                        </ngx-slick-carousel>
                                </div>
                            </div>

                            </div>
                            <div class="col-md-6 col-sm-12 col-xs-12">
                                <div class="detail-info pr-30 pl-30">
                                    <span class="stock-status in-stock" *ngIf="productDetails().instock"> Disponible </span>
                                    <span class="stock-status out-stock" *ngIf="!productDetails().instock"> Indisponible </span>
                                    <h2 class="title-detail">{{productDetails().name}}</h2>
                                    <div class="product-detail-rating">
                                        <div class="product-rate-cover text-end">
                                            <div class="product-rate d-inline-block">
                                                <div class="product-rating" style="width: 90%"></div>
                                            </div>
                                            <span class="font-small ml-5 text-muted"> (32 reviews)</span>
                                        </div>
                                    </div>
                                    <div class="clearfix product-price-cover">
                                        <div class="product-price primary-color float-left">
                                            <span class="current-price text-brand">{{productDetails().reduced_price |number:'1.0-0'}} CFA</span>
                                            <span>
                                                <span class="save-price font-md color3 ml-15">26% Off</span>
                                                <span class="old-price font-md ml-15">{{productDetails().price |number:'1.0-0'}} CFA</span>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="short-desc mb-30">
                                        <p class="font-lg" [innerHTML]="productDetails().description.substring(0,170) + '...'">
                                          <!-- {{productDetails().description.substring(0,170)}} ... -->
                                        </p>
                                    </div>
                                    <!-- <div class="attr-detail attr-size mb-30">
                                        <strong class="mr-10">Size / Weight: </strong>
                                        <ul class="list-filter size-filter font-small">
                                            <li><a href="#">50g</a></li>
                                            <li class="active"><a href="#">60g</a></li>
                                            <li><a href="#">80g</a></li>
                                            <li><a href="#">100g</a></li>
                                            <li><a href="#">150g</a></li>
                                        </ul>
                                    </div> -->
                                    <div class="detail-extralink mb-50">
                                        <div class="detail-qty border radius">
                                            <a role="button" class="qty-down" (click)="reduceQuantity()">
                                              <i class="fi-rs-angle-small-down"></i></a>
                                            <span class="qty-val">{{quantity}}</span>
                                            <a role="button" class="qty-up" (click)="addQuantity()">
                                              <i class="fi-rs-angle-small-up"></i></a>
                                        </div>
                                        <div class="product-extra-link2">
                                            <button type="submit" class="button button-add-to-cart" (click)="addTocart()">
                                              <i class="fi-rs-shopping-cart"></i>
                                              J'ACHETE
                                            </button>
                                            <a aria-label="Add To Wishlist" class="action-btn hover-up" (click)="addToWhishList()"><i class="fi-rs-heart"></i></a>
                                            <a aria-label="Compare" class="action-btn hover-up" href="javascript:void(0);" (click)="sendWhatsappMessage()">
                                              <i class="fi-rs-paper-plane"></i>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="font-xs">
                                        <ul class="mr-50 float-start">
                                            <li class="mb-5">Categorie: <span class="text-brand"> {{productDetails().category.name}} </span></li>
                                            <!-- <li class="mb-5">MFG:<span class="text-brand"> Jun 4.2021</span></li> -->
                                            <li>LIFE: <span class="text-brand">70 days</span></li>
                                        </ul>
                                        <ul class="float-start">
                                            <li class="mb-5">SKU: <a href="#">FWM15VKT</a></li>
                                            <!-- <li class="mb-5">Tags: <a href="#" rel="tag">Snack</a>, <a href="#" rel="tag">Organic</a>, <a href="#" rel="tag">Brown</a></li> -->
                                            <li>Stock:<span class="in-stock text-brand ml-5">{{productDetails().quantity_in_stock}} articles en  Stock</span></li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- Detail Info -->
                            </div>
                        </div>
                       <app-product-info [product]="product" [vendor]="vendorDetails"></app-product-info>
                       
                        <div class="row mt-60">
                            <div class="col-12">
                                <h2 class="section-title style-1 mb-30">Articles similaires</h2>
                            </div>
                            <div class="col-12">
                               <!-- <app-related-products [products]="similarProduct" ></app-related-products> -->
                               <div class="row related-products">
                                <div class="col-lg-3 col-md-4 col-12 col-sm-6" *ngFor="let item of similarProduct">
                                    <div class="product-cart-wrap hover-up">
                                        <div class="product-img-action-wrap">
                                            <div class="product-img product-img-zoom">
                                                <a
                                                (click)="next(item.slug)"
                                                    tabindex="0"
                                                >
                                                    <img
                                                        class="default-img"
                                                        [src]="baseUrl + item.image1"
                                                        alt
                                                    >
                                                    <img
                                                        class="hover-img"
                                                        [src]="baseUrl + item.image2"
                                                        alt
                                                    >
                                                </a>
                                            </div>
                                            <div class="product-action-1">
                                                <a
                                                    aria-label="Quick view"
                                                    class="action-btn small hover-up"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#quickViewModal"
                                                >
                                                    <i class="fi-rs-search"></i>
                                                </a>
                                                <a
                                                    aria-label="Add To Wishlist"
                                                    class="action-btn small hover-up"
                                                    href="shop-wishlist.html"
                                                    tabindex="0"
                                                >
                                                    <i class="fi-rs-heart"></i>
                                                </a>
                                                <a
                                                    aria-label="Compare"
                                                    class="action-btn small hover-up"
                                                    href="shop-compare.html"
                                                    tabindex="0"
                                                >
                                                    <i class="fi-rs-shuffle"></i>
                                                </a>
                                            </div>
                                            <div class="product-badges product-badges-position product-badges-mrg">
                                                <span class="hot">Hot</span>
                                            </div>
                                        </div>
                                        <div class="product-content-wrap">
                                            <h2>
                                                <a
                                                (click)="next(item.slug)"
                                                    tabindex="0"
                                                >
                                                {{item.name.substring(0, 20)}} ...
                                                </a>
                                            </h2>
                                            <div
                                                class="rating-result"
                                                title="90%"
                                            >
                                                <span></span>
                                            </div>
                                            <div class="product-price">
                                                <span>{{item.reduced_price |number:'1.0-0'}} CFA</span>
                                                <span class="old-price">{{item.price |number:'1.0-0'}} CFA</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </div>
                        </div>
                    </div>
                </div>
                }@else{

              <div class="item mt-30">
                <ngx-skeleton-loader
                  count="3"
                  animation="progress"
                  [theme]="{
                    height: '50px'
                  }"
                ></ngx-skeleton-loader>
              </div>
                }
            </div>
        </div>
    </div>
</div>
